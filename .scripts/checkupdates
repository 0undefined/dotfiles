#!/usr/bin/env sh
set -e

updates=$(pacman -Qu | sed '/\[ignored\]$/d')

case $BLOCK_BUTTON in
  1) ;&  # fallthrough
  3) if [ -n "${updates}" ]; then
       notify-send -t $((1000 * 20)) "Available updates" "$updates"
     else
       notify-send "Available updates" "No available updates"
     fi;;
esac

[ -n "$updates" ] && echo $(echo "${updates}" | wc -l) || exit 0
